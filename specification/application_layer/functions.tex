\section{Application-level functions}\label{sec:application_level_functions}

This section documents the high-level functionality defined by UAVCAN.
Common high-level functions form a uniform set of basic functions that span across different application domains.
All of the functions defined in this section are optional,
except for the node heartbeat feature (section \ref{sec:application_node_heartbeat}),
which is mandatory for all UAVCAN nodes.

\subsection{Node initialization}

UAVCAN does not require that nodes undergo any specific initialization upon connecting to the bus ---
a node is free to begin functioning immediately once it is powered up.
However, the transitioning to the operating state (even if there is no other state to transition from)
is to be reflected via the mandatory heartbeat message, described in section \ref{sec:application_node_heartbeat}.

\subsection{Node heartbeat}\label{sec:application_node_heartbeat}

Every UAVCAN node must report its status and presence by publishing messages of type
\DSDLReference{uavcan.node.Heartbeat} at a fixed rate specified in the message definition.

This is the only high-level protocol function that UAVCAN nodes are required to support.
All other data types and application-level functions are optional.

\DSDL{uavcan.node.Heartbeat}

\subsection{Generic node information}

The service \DSDLReference{uavcan.node.GetInfo} can be used to obtain generic information about the node,
such as the structured name of the node (which includes the name of its vendor),
a 128-bit globally unique identifier, the version information about its hardware and software,
version of the UAVCAN specification implemented on the node, and the optional certificate of authenticity.

While the service is, strictly speaking, optional, omitting its support is highly discouraged,
since it is instrumental for network discovery, firmware update, and various maintenance and diagnostic needs.

\DSDL{uavcan.node.GetInfo}

\subsection{Bus data flow monitoring}

The combination of the following three services defined in the namespace \DSDLReference{uavcan.node.port}
enables a highly capable tool of network inspection and monitoring:
\begin{itemize}
    \item \DSDLReference{uavcan.node.port.List} --- designed for obtaining the full set of subjects and services
    implemented by the server node.

    \item \DSDLReference{uavcan.node.port.GetInfo} --- returns the static (unchanging or slowly changing)
    information about the selected subject or service.

    \item \DSDLReference{uavcan.node.port.GetStatistics} --- returns transfer event counters of
    the selected subject or service.
\end{itemize}

The first service \verb|List| allows the caller to construct a list of all subjects and services used by each
node on the bus.
The second service \verb|GetInfo| allows the caller to map each subject or service to a particular data type,
and understand the role of each node in relation to said subject or service
(publisher, subscriber, or server).
By comparing the data obtained with the help of these two services from each node on the bus,
the caller can reconstruct the data exchange graph for the entire bus,
thus enabling advanced network monitoring and diagnostic purposes.

The last service \verb|GetStatistics| can be used to sample the number of transfers and errors observed
on the specified port.
When invoked periodically, this service allows the caller to observe the real time intensity of data exchange
for each port on each node independently.
In combination with the data exchange graph reconstruction,
this option allows the caller to build a sophisticated real-time view of the bus.
